{"version":3,"file":"accordion.js","sources":["webpack:///./themes/mcg/assets/src/js/main/accordion/Accordion.ts"],"sourcesContent":["import { getAll } from \"@/utils\";\n\nexport default class Accordion {\n    element: HTMLElement;\n    triggers: HTMLElement[];\n\n    constructor(element: HTMLElement) {\n        this.element = element;\n        this.triggers = getAll(\".js-accordion-trigger\", this.element);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        let elActivePanel: HTMLElement;\n        let elActiveTrigger = this.triggers.find((el) => el.classList.contains(\"is-open\"));\n\n        if (elActiveTrigger) {\n            elActivePanel = elActiveTrigger.nextElementSibling as HTMLElement;\n        }\n\n        this.triggers.forEach((trigger) => {\n            const elPanel = trigger.nextElementSibling as HTMLElement;\n            let savedHeight: number;\n\n            trigger.addEventListener(\"click\", (event) => {\n                const elTrigger = event.currentTarget as HTMLElement;\n                if (elActiveTrigger && elActiveTrigger !== elTrigger) {\n                    elActiveTrigger.classList.remove(\"is-open\");\n                    elActivePanel.style.maxHeight = \"0px\";\n                }\n\n                if (!savedHeight) {\n                    elPanel.style.maxHeight = \"none\";\n                    savedHeight = elPanel.offsetHeight;\n                    elPanel.style.maxHeight = \"0px\";\n                }\n\n                requestAnimationFrame(() => {\n                    const isOpen = elTrigger.classList.toggle(\"is-open\");\n                    elPanel.style.maxHeight = `${isOpen ? savedHeight : 0}px`;\n                    elActivePanel = elPanel;\n                    elActiveTrigger = elTrigger;\n                });\n            });\n        });\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;AAIA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;;;;A","sourceRoot":""}