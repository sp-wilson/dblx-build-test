(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["Vimeo"],{

/***/ "./themes/mcg/assets/src/js/main/video/Video.ts":
/*!******************************************************!*\
  !*** ./themes/mcg/assets/src/js/main/video/Video.ts ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils */ \"./themes/mcg/assets/src/js/utils/index.ts\");\n/* harmony import */ var _utils_observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/observer */ \"./themes/mcg/assets/src/js/utils/observer.ts\");\n\n\n\n\n/**\n * This is video base class.\n */\nclass Video {\n  constructor(element) {\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"element\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"container\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"id\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isPlaying\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isReady\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"queue\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"player\", void 0);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"playPromise\", void 0);\n\n    this.element = element;\n    this.container = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"get\"])(\".js-video-container\", element);\n    this.id = element.getAttribute(\"data-id\") || \"\";\n    this.isPlaying = false;\n    this.isReady = false;\n    this.queue = new Set();\n    this.createPlayer();\n\n    this._observeElement();\n\n    element.dispatchEvent(new CustomEvent(\"videoloaded\"));\n  }\n\n  play() {\n    if (this.isPlaying) return;\n\n    if (!this.isReady) {\n      this.createPlayer();\n\n      this._queueTask(\"play\");\n\n      return;\n    }\n\n    this.playPromise = Promise.resolve(this.playVideo());\n  }\n\n  async pause() {\n    if (!this.isPlaying) return;\n\n    if (!this.isReady || typeof this.playPromise === \"undefined\") {\n      this._queueTask(\"pause\");\n\n      return;\n    }\n\n    await this.playPromise;\n    this.pauseVideo();\n    this.onStop();\n  }\n\n  onEnded() {\n    this.onStop();\n  }\n\n  onPlay() {\n    this.element.setAttribute(\"data-status\", \"loaded playing\");\n    this.isPlaying = true;\n  }\n\n  onStop() {\n    this.element.setAttribute(\"data-status\", \"loaded paused\");\n    this.isPlaying = false;\n  }\n\n  watchResize(videoWidth, videoHeight) {\n    const aspectRatio = videoHeight / videoWidth;\n\n    const updateSize = () => {\n      const containerWidth = this.element.clientWidth;\n      this.container.style.width = `${containerWidth}px`;\n      this.container.style.height = `${containerWidth * aspectRatio}px`;\n    };\n\n    updateSize();\n    this.element.dispatchEvent(new CustomEvent(\"videosize\"));\n    window.dispatchEvent(new CustomEvent(\"resize\"));\n    window.addEventListener(\"resize\", () => updateSize());\n    this.player.element.setAttribute(\"tabindex\", \"-1\");\n  }\n\n  flushQueue() {\n    this.queue.forEach(command => this[command]());\n    this.queue.clear();\n  }\n\n  _queueTask(command) {\n    this.queue.add(command);\n  }\n\n  _observeElement() {\n    Object(_utils_observer__WEBPACK_IMPORTED_MODULE_2__[\"observe\"])(this.container, inView => {\n      if (inView) {\n        this.play();\n      } else if (this.isReady) {\n        this.pause();\n      }\n    }, {\n      threshold: 0.25,\n      rootMargin: \"-50px\"\n    });\n  }\n\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Video);\n\n//# sourceURL=webpack:///./themes/mcg/assets/src/js/main/video/Video.ts?");

/***/ }),

/***/ "./themes/mcg/assets/src/js/main/video/types/Vimeo.ts":
/*!************************************************************!*\
  !*** ./themes/mcg/assets/src/js/main/video/types/Vimeo.ts ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _vimeo_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vimeo/player */ \"./node_modules/@vimeo/player/dist/player.es.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils */ \"./themes/mcg/assets/src/js/utils/index.ts\");\n/* harmony import */ var _Video__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Video */ \"./themes/mcg/assets/src/js/main/video/Video.ts\");\n\n\n\n\n\nclass VimeoVideo extends _Video__WEBPACK_IMPORTED_MODULE_3__[\"default\"] {\n  constructor(...args) {\n    super(...args);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"firstBuffer\", true);\n\n    Object(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"player\", void 0);\n  }\n\n  createPlayer() {\n    if (this.player) return;\n\n    VimeoVideo._warmConnections(); // Check if private video has two part id\n\n\n    const url = this.container.getAttribute(\"data-url\") || undefined;\n    this.player = new _vimeo_player__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this.container, {\n      background: true,\n      byline: false,\n      color: \"ffffff\",\n      id: +this.id,\n      url,\n      loop: true,\n      muted: true,\n      portrait: false,\n      title: false\n    });\n    this.player.on(\"ended\", () => this.onEnded());\n    this.player.on(\"loaded\", () => this._onReady());\n    this.player.on(\"pause\", () => this.pause());\n    this.player.on(\"play\", () => this.onPlay());\n    if (_utils__WEBPACK_IMPORTED_MODULE_2__[\"device\"].isIOS) this.player.on(\"bufferend\", () => {\n      if (this.firstBuffer) {\n        this.firstBuffer = false;\n        this.onPlay();\n      }\n    });\n  }\n\n  playVideo() {\n    this.player.play();\n  }\n\n  pauseVideo() {\n    this.player.pause();\n  }\n\n  async _onReady() {\n    this.isReady = true;\n    const [width, height] = await Promise.all([this.player.getVideoWidth(), this.player.getVideoHeight()]);\n    this.watchResize(width, height);\n    \"requestIdleCallback\" in window ? // @ts-ignore\n    requestIdleCallback(() => this.flushQueue()) : this.flushQueue();\n  }\n\n  static _warmConnections() {\n    if (VimeoVideo.preconnected) return; // The iframe document and most of its subresources come right off player.vimeo.com\n\n    Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"addPrefetch\"])(\"preconnect\", \"https://player.vimeo.com\"); // Images\n\n    Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"addPrefetch\"])(\"preconnect\", \"https://i.vimeocdn.com\"); // Files .js, .css\n\n    Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"addPrefetch\"])(\"preconnect\", \"https://f.vimeocdn.com\"); // Metrics\n\n    Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"addPrefetch\"])(\"preconnect\", \"https://fresnel.vimeocdn.com\");\n    VimeoVideo.preconnected = true;\n  }\n\n}\n\nObject(_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(VimeoVideo, \"preconnected\", void 0);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (VimeoVideo);\n\n//# sourceURL=webpack:///./themes/mcg/assets/src/js/main/video/types/Vimeo.ts?");

/***/ })

}]);